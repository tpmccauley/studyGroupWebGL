<html>
<head>
  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/white.css">
</head>
<body>
  <div class="reveal">
    <div class="slides">

      <section>
        <h3>Introduction to WebGL</h3>
        <div>
          Tom McCauley
          <p>thomas.mccauley@cern.ch</p>
          <p>@tpmccauley</p>
          <p>University of Notre Dame, USA</p>
        </div>
        <div>
          CERN Study Group, X April 2016
        </div>
      </section>

      <section>
        <h3>Outline</h3>
        <ul>
          <li> WebGL
          <li> HTML, CSS, JavaScript
          <li>
        </ul>
      </section>

      <section>
        <section>
          <p>WebGL</p>
        </section>
        <section>
          A bit more about WebGL here
        </section>
      </section>

      <section>
        <section>
          <p>THREE.js</p>
          <ul>
            <li>http://threejs.org
          </ul>
        </section>
        <section>
          Show an example of raw WebGL code vs three.js
        </section>
      </section>

      <section>
        <p>Check if WebGL is enabled:</p>
        <ul>
          <li><a target="_blank" href="http://caniuse.com/#feat=webgl">http://caniuse.com/#feat=webgl</a>
          <li><a target="_blank" href="http://www.doesmybrowsersupportwebgl.com">http://www.doesmybrowsersupportwebgl.com</a>
        </ul>
      </section>

      <section>
        <p>Let's start with a minimal page</p>
        <pre><code style="max-height: 100%">
        &lt;!DOCTYPE html&gt;
        &lt;html&gt;
          &lt;head&gt;
            &lt;meta charset=utf-8&gt;
            &lt;title&gt;CERN Study Group: WebGL&lt;/title&gt;
            &lt;style&gt;
              body { margin: 0; }
              canvas { width: 100%; height: 100% }
            &lt;/style&gt;
          &lt;/head&gt;
          &lt;body&gt;
            &lt;script src="js/three.min.js"&gt;&lt;/script&gt;
            &lt;script&gt;
            &lt;!-- We we will put our JavaScript here --&gt;
            &lt;/script&gt;
          &lt;/body&gt;
        &lt;/html&gt;
        </code></pre>
      </section>

      <section>
        <p>There are 3 essentials: scene, camera, renderer</p>
      </section>

      <section>
        <section>
        <p>Add a scene and a camera</p>
        <pre><code style="max-height: 100%">
          var w = window.innerWidth;
          var h = window.innerHeight;

          var scene = new THREE.Scene();

          // Args: field-of-view, aspect ratio, near, far
          var camera = new THREE.PerspectiveCamera(75, w/h, 0.1, 1000);
          camera.position.z = 5;
        </code></pre>
        </section>
        <section>
          Explain fov, aspect, etc.
        </section>
      </section>

      <section>
        <p>Add a renderer and a render loop</p>
        <pre><code style="max-height: 100%">
          var renderer = new THREE.WebGLRenderer({antialias:true});
          renderer.setSize(w, h);
          renderer.setPixelRatio(window.devicePixelRatio ? window.devicePixelRatio : 1);

          document.body.appendChild(renderer.domElement);

          var render = function () {
            requestAnimationFrame(render);
            renderer.render(scene, camera);
          };

          render();
        </code></pre>
        <p><a target="_blank" href="../code/1.html">See result here</a></p>
      </section>

      <section>
        <section>
          <p>That was underwhelming. What gives?</p>
        </section>
        <section>
          <p>The canvas is there. We just haven't added anything to the scene yet:</p>
          <img src="./img/one.png"></img>
        </section>
      </section>

      <section>
        <section>
          <p>Add a cube to the scene</p>
          <pre><code style="max-height: 100%">
            var renderer = new THREE.WebGLRenderer({antialias:true});
            renderer.setSize(w, h);
            renderer.setPixelRatio(window.devicePixelRatio ? window.devicePixelRatio : 1);

            document.body.appendChild(renderer.domElement);

            var geometry = new THREE.BoxGeometry(1, 1, 1);
            var material = new THREE.MeshBasicMaterial({color: 0x00ff00, wireframe:false});
            var cube = new THREE.Mesh(geometry, material);
            scene.add(cube);

            var render = function () {
              requestAnimationFrame(render);
              renderer.render(scene, camera);
            };

            render();
          </code></pre>
          <p><a target="_blank" href="../code/2.html">See result here</a></p>
        </section>
        <section>
          More on geometries, materials, and meshes here
        </section>
      </section>

      <section>
        <p>Better, but it doesn't do much does it?</p>
      </section>

      <section>
        <p>Add some controls and change cube to wireframe</p>
        <pre><code style="max-height: 100%">
          &lt;script src="js/TrackballControls.js">&lt;/script&gt;
        </code></pre>
        <pre><code style="max-height: 100%">
            var controls = new THREE.TrackballControls(camera, renderer.domElement);
            controls.rotateSpeed = 3.0;
            controls.zoomSpeed = 0.5;

            var geometry = new THREE.BoxGeometry(1, 1, 1);
            var material = new THREE.MeshBasicMaterial({color: 0x00ff00, wireframe:true});
            var cube = new THREE.Mesh(geometry, material);
            scene.add(cube);

            var render = function () {
              requestAnimationFrame(render);
              controls.update();
              renderer.render(scene, camera);
            };
        </code></pre>
        <p><a target="_blank" href="../code/3.html">See result here</a></p>
      </section>

      <section>
        <p>Change from wireframe</p>
        <pre><code style="max-height: 100%">
            var controls = new THREE.TrackballControls(camera, renderer.domElement);
            controls.rotateSpeed = 3.0;
            controls.zoomSpeed = 0.5;

            var geometry = new THREE.BoxGeometry(1, 1, 1);
            var material = new THREE.MeshBasicMaterial({color: 0x00ff00, wireframe:false});
            var cube = new THREE.Mesh(geometry, material);
            scene.add(cube);

            var render = function () {
              requestAnimationFrame(render);
              controls.update();
              renderer.render(scene, camera);
            };
        </code></pre>
        <p><a target="_blank" href="../code/4.html">See result here</a></p>
      </section>

      <section>
          <p>Change the material</p>
          <pre><code style="max-height: 100%">
          var geometry = new THREE.BoxGeometry(1, 1, 1);
          var material = new THREE.MeshPhongMaterial({color: 0x00ff00});
          var cube = new THREE.Mesh(geometry, material);
          scene.add(cube);
          </code></pre>
          <p><a target="_blank" href="../code/5.html">See result here</a></p>
      </section>

      <section>
        <section>
          Just black?
        </section>
        <section>
          More here on materials and lighting
        </section>
      </section>

      <section>
        <p>Add an ambient light</p>
        <pre><code style="max-height: 100%">
        var light = new THREE.AmbientLight(0xffffff);
        scene.add(light);
        </code></pre>
        <p><a target="_blank" href="../code/6.html">See result here</a></p>
      </section>

      <section>
        <p>Let's tone down the ambient light a bit and add a directional light. I've added in the
        example an axes indicator. RGB:XYZ
        </p>
        <pre><code style="max-height: 100%">
        var light = new THREE.AmbientLight(0x404040);
        scene.add(light);

        var directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
        directionalLight.position.set( 0, 0.5, 1);
        scene.add(directionalLight);
        </code></pre>
        <p><a target="_blank" href="../code/7.html">See result here</a></p>
      </section>

      <section>
        <p>Add a texture</p>
        <pre><code style="max-height: 100%">
        var material = new THREE.MeshPhongMaterial();
        material.map = new THREE.ImageUtils.loadTexture("cms-color-medium.png");
        </code></pre>
        <p><a target="_blank" href="../code/8.html">See result here</a></p>
      </section>

      <section>
        <p>Let's animate</p>
        <pre><code style="max-height: 100%">
        var render = function () {
          requestAnimationFrame( render );
          controls.update();

          cube.rotation.x += 0.01;
          cube.rotation.y += 0.01;

          renderer.render(scene, camera);
        };
        </code></pre>
        <p><a target="_blank" href="../code/9.html">See result here</a></p>
      </section>

      <section>
        <p>Let's add an event listener (listen for "click") and add some other images</p>
        <pre><code style="max-height: 100%">
        var textures = ["img/cms-color-medium.png",
                        "img/ATLAS-Logo-Ref-RGB-H_0.jpg",
                        "img/4_Color_Logo_CB.png",
                        "img/lhcb_logo.png",
                        "img/CERN-logo.jpg"];

        var ti = 0;
        material.map = new THREE.TextureLoader().load(textures[0]);
        var cube = new THREE.Mesh( geometry, material );
        scene.add( cube );

        [...]

        window.addEventListener('click', function(){
          ti = ti === textures.length-1 ? 0 : ti+1;
          material.map = new THREE.TextureLoader().load(textures[ti]);
        });
      </code></pre>
      <p><a target="_blank" href="../code/10.html">See result here</a></p>
      </section>

      <section>
        <h3>References and further reading</h3>
        <ul>
          <li>JavaScript: The Good Parts, Douglas Crockford
          <li>WebGL Programming Guide, Kouichi Matsuda and Rodger Lea
        </ul>
      </section>
    </div>
  </div>
  <script src="js/reveal.js"></script>
  <script>
    Reveal.initialize();
  </script>
</body>
</html>
